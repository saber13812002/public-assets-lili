class ProValidation{validateCallback=function(e,i){};showErrorCallback=function(e,i){return e};singleValidate(e){const i=new ProField(e);if("structure"===i.isRequired){const e=this.#standardFieldValue(i),t=this.#validate(e,i,!0);let a=$(`#field_error_${i.input.attr("id")}`);return void 0!==t?(this.#setStatusOnElement(i.element,a,t,!0),!1):(a.removeClass("active"),i.element.removeClass("field--invalid field--valid"),$(`#field_error_${i.input.attr("id")}`).removeClass("active"),!0)}let t=i.element.parents("[data-dependency-show=false]");if(1!=i.isRequired||t.length>0)return t.length>0&&(i.element.removeClass("field--invalid field--valid"),$(`#field_error_${i.input.attr("id")}`).removeClass("active")),!0;if(!this.#dependencyCheck(i)&&void 0!==i.isRequiredElement&&""!==i.isRequiredElement){if($(`#field_error_${i.input.attr("id")}`).removeClass("active"),void 0!==i.isRequiredType){const e=this.#standardFieldValue(i),t=this.#validate(e,i,!0);let a=$(`#field_error_${i.input.attr("id")}`);return void 0!==t?(this.#setStatusOnElement(i.element,a,t,!0),!1):(this.#setStatusOnElement(i.element,a,t,!1),!0)}return!0}if(i.groupValidation[0]){let e=this,t=[],a=[],r=!1,l=i.groupValidation.find(".field-error-msg");if(i.groupValidationFields.each((function(i,r){const l=new ProField(r),s=e.#standardFieldValue(l),d=e.#validate(s,l);1!=l.isRequired||l.element.parents("[data-dependency-show=false]").length>0||(void 0!==d?(t.push(!0),a.push(l.label)):t.push(!1))})),void 0!==i.groupValidationRelation?("or"===i.groupValidationRelation.toLowerCase()&&(r=t.every((e=>!0===e))),"and"===i.groupValidationRelation.toLowerCase()&&(r=t.some((e=>!0===e)))):r=t.some((e=>!0===e)),r){let e=this.showErrorCallback(this.message("requiredFieldSelect",{label:1===a.length?a.join():[a.slice(0,a.length-1).join(", "),a[a.length-1]].join(" and ")}),i);return this.#setStatusOnElement(i.groupValidationFields,l,e,!0),!1}return this.#setStatusOnElement(i.groupValidationFields,l,"",!1),!0}const a=this.#standardFieldValue(i),r=this.#validate(a,i);let l=$(`#field_error_${i.input[0]?i.input.attr("id"):i.textarea.attr("id")}`);return void 0!==r?(this.#setStatusOnElement(i.element,l,r,!0),!1):(this.#setStatusOnElement(i.element,l,r,!1),!0)}#setStatusOnElement(e,i,t,a=!1){a?(e.addClass("field--invalid"),e.removeClass("field--valid"),i.html(this.showErrorCallback(t,e)),i.addClass("active")):e.hasClass("field--invalid")&&(e.removeClass("field--invalid"),e.addClass("field--valid"),i.removeClass("active"))}#standardFieldValue(e){switch(e.type){case"text":case"number":case"location":case"date":case"time":return e.input.val();case"select":case"upload":return""===e.input.val()?[]:e.input.val().split(",");case"checkbox":return e.input.is(":checked")?"true":"";case"radio":let i=$(`[name="${e.input.attr("name")}"]:checked`);return i.length?i.val():"";case"textarea":return e.textarea.val()}}#validate(e,i,t=!1){if(!t&&(""===e||0===e.length))return"password"===i.isRequiredType&&($(`#password_hint_${i.input.attr("id")}`).hide(),$(`#password_strength_${i.input.attr("id")}`).removeClass("active")),"select"===i.type||"checkbox"===i.type||"radio"===i.type?this.message("requiredFieldSelect",{label:i.label}):"upload"===i.type?this.message("requiredFieldUpload",{label:i.label}):this.message("requiredField",{label:i.label});if("number"===i.type&&isNaN(e))return this.message("requiredFieldNumbersExample",{label:i.label,example:"75"});const a=/^[^\d!@#$%^&*()_+=[\]{};':"\\|,.<>?`~]+$/,r=/^[ァ-ンぁ-んぁ-ん一-龯]+$/,l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,s=/^(\+?\d{1,3})?[-.\s]?\(?\d{1,4}\)?[-.\s]?\d{1,4}[-.\s]?\d{1,9}$/,d=/^[a-zA-Z0-9._]{1,30}$/,n=/^[a-zA-Z0-9._-]{6,20}$/,o=/^[a-zA-Z0-9_]{1,15}$/,u=/^[a-zA-Z0-9_]{3,24}$/,c=/^(?![-.])(?!.*[-.]{2})[a-zA-Z0-9.-]{5,50}(?<![-.])$/,m=/^[a-zA-Z0-9.-]{3,30}$/,p=/^(?=[a-zA-Z\d]{8,20}$)(?=.*[a-zA-Z]).*$/;switch(i.isRequiredType){case"firstname":if(""===e)return;return a.test(e)?void 0:this.message("requiredFieldLettersExample",{label:i.label,example:"John"});case"lastname":if(""===e)return;return a.test(e)?void 0:this.message("requiredFieldLettersExample",{label:i.label,example:"Doe"});case"japanFirstName":if(""===e)return;return r.test(e)?void 0:this.message("requiredFieldLettersExample",{label:i.label,example:"高橋"});case"japanLastName":if(""===e)return;return r.test(e)?void 0:this.message("requiredFieldLettersExample",{label:i.label,example:"高橋島"});case"lineID":if(""===e)return;return p.test(e)?void 0:this.message("requiredFieldSocialAccountID",{example:"a-Z 0-9 - _ . (Length 8-20)"});case"instagramID":if(""===e)return;return d.test(e)?void 0:this.message("requiredFieldSocialAccountID",{example:"a-Z 0-9 _ . (Length 1-30)"});case"youtubeID":if(""===e)return;return n.test(e)?void 0:this.message("requiredFieldSocialAccountID",{example:"a-Z 0-9 - _ . (Length 6-20)"});case"tiktokID":if(""===e)return;return u.test(e)?void 0:this.message("requiredFieldSocialAccountID",{example:"a-Z 0-9 _ (Length 3-24)"});case"twitterID":if(""===e)return;return o.test(e)?void 0:this.message("requiredFieldSocialAccountID",{example:"a-Z 0-9 _ (Length 1-15)"});case"facebookID":if(""===e)return;return c.test(e)?void 0:this.message("requiredFieldSocialAccountID",{example:"a-Z 0-9 - . (Length 5-50)"});case"linkedinID":if(""===e)return;return m.test(e)?void 0:this.message("requiredFieldSocialAccountID",{example:"a-Z 0-9 - . (Length 3-30)"});case"url":if(""===e)return;try{new URL(e);return}catch(e){return this.message("requiredFieldURL",{example:"https://www.example.com"})}case"range":{let t=parseFloat(i.element.data("min")),a=parseFloat(i.element.data("max")),r=parseFloat(e),l=i.element.data("unit"),s=i.element.data("example");return r>a||r<t?this.message("requiredFieldRangeExample",{label:i.label,start:t,end:a,u:l||"",example:s||"80"}):void 0}case"email":{if(""===e)return;const t=e.indexOf("@");return-1===t||t===e.length-1?this.message("requiredFieldEmailAt",{example:"example@example.com"}):l.test(e)?void 0:this.message("requiredFieldCorrectly",{label:i.label,example:"example@example.com"})}case"mobile":if(""===e)return;return s.test(e)?void 0:this.message("requiredFieldCorrectly",{label:i.label,example:"12345698967"});case"verifycode":return 7!=e.length?this.message("requiredFieldVerifyCode",{}):void 0;case"password":{const t=i.input.attr("id"),a=$(`#password_strength_${t}`),r=i.element.data("target"),l=$(`#${r}`);let s=0;if($(`#password_hint_${t}`).hide(),e.length>=6&&(s+=1),/[a-z]/.test(e)&&(s+=1),/[A-Z]/.test(e)&&(s+=1),/\d/.test(e)&&(s+=1),/[!@#$%^&*()_+{}\[\]:;<>,.?~\-/\\]/.test(e)&&(s+=1),a.length){const e=a.find(".strength-indicator");e.removeClass("level-1 level-2 level-3 level-4");let i="",t="";switch(s){case 0:case 1:i="Very Weak",t="icon-alert-triangle";break;case 2:i="Weak",t="icon-alert-triangle";break;case 3:i="So-so",t="icon-info";break;case 4:i="Good",t="icon-tick";break;case 5:i="Great",t="icon-tick"}e.find(".strength-status").html(`${i} <i class="${t}"></i>`),a.addClass("active"),(s<1||s>1)&&a.find(".notifications-list").removeClass("active"),s>1?e.addClass("level-"+(s-1)):a.find(".notifications-list").addClass("active")}if(l.length){const i=l.val();""===i&&($(`#field_error_${r}`).html(this.message("requiredFieldPassConfirmInter",{})),$(`#field_error_${r}`).addClass("active"),l.parents(".field").addClass("field--invalid"),l.parents(".field").removeClass("field--valid")),e!==i&&""!==i&&($(`#field_error_${r}`).html(this.message("requiredFieldPassConfirm",{})),$(`#field_error_${r}`).addClass("active"),l.parents(".field").addClass("field--invalid"),l.parents(".field").removeClass("field--valid")),e===i&&($(`#field_error_${r}`).removeClass("active"),l.parents(".field").removeClass("field--invalid"),l.parents(".field").addClass("field--valid"))}return e.length<6?this.message("requiredFieldPassLimit",{limit:6}):s<3?this.message("requiredFieldPassScore",{}):void 0}case"confirm_password":{const t=i.element.data("target");return e!==$(`#${t}`).val()?this.message("requiredFieldPassConfirm",{}):void 0}}this.validateCallback(e,i)}#dependencyCheck(e){if(void 0===e.isRequiredElement)return;const i=$(`#${e.isRequiredElement}`),t=new ProField(i.parents(".field")[0]),a=e.isRequiredValue,r=this.#standardFieldValue(t),l=this.#compareValue(a,r);$(`#field_error_${e.input.attr("id")}`);return"required"===e.isRequiredMode?l:"exclusive"===e.isRequiredMode&&!l}#compareValue(e,i){const t=typeof e,a=typeof i;if("string"===t&&"string"===a)return e===i;if("string"===t&&"object"===a)return""===e&&0===i.length||-1!==$.inArray(e,i);if("object"===t&&"string"===a)return""===i&&0===e.length||-1!==$.inArray(i,e);if("object"===t&&"object"===a){if(e.length!==i.length)return!1;let t=!0;for(let a=0;a<e.length;a++)-1===$.inArray(e[a],i)&&(t=!1);return t}}message(e,i){let t={requiredField:"This field is required. Please enter your :label.",requiredFieldLettersExample:":label can only contain letters. exp: :example",requiredFieldNumbersExample:":label can only contain numbers. exp: :example",requiredFieldLettersLength:":label must contain :length letters. exp: :example",requiredFieldRangeExample:":label must be within the range of :start :u to :end :u. exp: :example",requiredFieldNumberSize:"This field is required. Please enter your :label size.",requiredFieldNumberLength:":label must contain :length digits. exp: :example",requiredFieldSelect:"This field is required. Please select your :label.",requiredFieldVerified:":label must be verified.",requiredFieldVerified2:"This field is required. Your :label must be verified.",requiredFieldVerifiedIncorrect:"The entered verification code is incorrect. Please re-enter the code.",requiredFieldUpload:"This field is required. Please upload your :label.",requiredFieldCorrectly:"Please enter the :label correctly. exp: :example",requiredFieldEmailAt:"Email address must contain a single “@”. exp: :example",requiredFieldVerifyCode:"The entered verification code is incorrect. Please re-enter the code.",requiredFieldPassLimit:"Password must be at least :limit characters.",requiredFieldPassScore:"Your password is very weak.",requiredFieldPassConfirm:"Confirm password does not match. Please re-enter it.",requiredFieldPassConfirmInter:"Please confirm your password.",requiredFieldSocialAccountID:"Enter your account ID correctly. Allowed characters: :example",requiredFieldURL:"The url is not valid. exp: :example"}[e];return Object.entries(i).forEach((([e,i])=>{try{t=t.replace(`:${e}`,i)}catch(e){console.log(e)}})),t}}class ProField{constructor(e){e=$(e),this.element=e,this.id=e.attr("id"),this.type=e.data("type"),this.input=e.find("input"),this.textarea=e.find("textarea"),this.isRequired=e.data("required"),this.isRequiredType=e.data("required-type"),this.isRequiredMode=e.data("required-mode"),this.isRequiredValue=e.data("required-value"),this.isRequiredElement=e.data("required-element"),this.groupValidation=e.parents(".field-group-validations"),this.groupValidationFields=this.groupValidation.find(".field"),this.groupValidationRelation=this.groupValidation.data("group-validation-relation");const i=e.find("label").clone();i.find("*:not(.field-label)").remove(),this.label=i.text().trim().replace(/\s+/g," ")}element;id;type;label;input;isRequired;isRequiredType;isRequiredMode;isRequiredValue;isRequiredElement;groupValidation;groupValidationFields;groupValidationRelation}