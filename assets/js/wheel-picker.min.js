class WheelPicker{constructor(t={}){return this.options=Object.assign({items:[],default:null,height:48,around:2,onSelect:function(){}},t),this.step=0,this.itemMoved=0,this.isMove=!1,this.startOffsetY=0,this.moveOffsetY=0,this.sensitivity=.8,this.frame=$('<div class="wheel-picker"></div>'),this.wrapper=$('<div class="wheel-wrapper"></div>'),this.frame.append(this.wrapper),this.generateItems(),this.setDefault(),this.setPosition(),this.setEvents(),this.frame}setDefault(){this.frame.height((2*this.options.around+1)*this.options.height),this.wrapper.css({paddingTop:this.options.around*this.options.height,paddingBottom:this.options.around*this.options.height})}setPosition(){let t=this.wrapper.find(".wheel-item"),e=this.wrapper.find(`.wheel-item[data-step=${this.step}]`);t.removeClass("active"),e.addClass("active"),this.options.onSelect(e.data("value"),e),this.wrapperTranslateY(this.step*this.options.height*-1)}generateItems(){let t=this;this.options.items.forEach((function(e,s){let i=$(`<div class="wheel-item" data-step="${s}" data-value="${e.value}">${e.label}</div>`);i.css({height:t.options.height,lineHeight:t.options.height+"px"}),i.on("click",(function(){$(window).width()<576&&(t.step=parseInt($(this).data("step")),t.setPosition())})),t.options.default?t.options.default==e.value&&(t.step=s):t.step=0,t.wrapper.append(i)}))}wrapperTranslateY(t){this.wrapper.css({transform:`translateY(${t}px)`})}setEvents(){let t=this;this.frame.on("mousewheel",(function(e){return e.originalEvent.wheelDelta>0?t.step-1<0?t.step=0:t.step=t.step-1:t.step+1<t.options.items.length?t.step=t.step+1:t.step=t.options.items.length-1,t.setPosition(),!1}));const e=function(e){if(t.isMove){let s;s=e.originalEvent.clientY?e.originalEvent.clientY-t.startOffsetY:e.originalEvent.touches[0].clientY-t.startOffsetY,t.moveOffsetY=s*t.sensitivity,t.wrapperTranslateY(t.step*t.options.height*-1+t.moveOffsetY)}return!1},s=function(i){return t.isMove=!1,t.wrapper.removeClass("is-move"),t.itemMoved=Math.round(t.moveOffsetY/t.options.height*-1),t.step+t.itemMoved<0?t.step=0:t.step+t.itemMoved<t.options.items.length?t.step=t.step+t.itemMoved:t.step=t.options.items.length-1,$(document).off("touchmove mousemove",e),$(document).off("touchend mouseup",s),t.setPosition(),!1};this.frame.bind("touchstart mousedown",(function(i){return i.originalEvent.clientY?t.startOffsetY=i.originalEvent.clientY:t.startOffsetY=i.originalEvent.touches[0].clientY,t.isMove=!0,t.wrapper.addClass("is-move"),$(document).on("touchmove mousemove",e),$(document).on("touchend mouseup",s),!1})),this.frame.on("reset",(function(){const e=$(this).attr("data-items");$(this).attr("data-default");void 0!==e&&(t.options.items=JSON.parse(e),t.options.default=null,t.frame.find(".wheel-item").remove(),t.generateItems(),t.setDefault(),t.setPosition())}))}}